# User Journeys for the Autism Screening App

This document outlines the step-by-step user flows for both researchers and child participants. The app uses a stack-based navigation model. It also integrates updated gameplay mechanics based on the Hierarchical Prompt Protocol (HPP), dynamic difficulty logic, configurable settings, and comprehensive event logging.

---

## Journey 1: First-Time App Launch

1. **App Start**: Researcher opens the app for the first time.
2. **Initial Screen**: App opens directly to the main researcher dashboard.
3. **Empty State**: Dashboard displays a welcoming message and a prominent **“Create New Participant”** button. No participants are listed.

---

## Journey 2: Returning User Launch (With Existing Data)

1. **App Start**: Researcher opens the app.
2. **Dashboard Screen**: App shows a list of existing participants.
3. **Participant Info**: Each participant card includes:
   - Participant Code (e.g., *Participant_001*)
   - Age
   - Diagnosis/Condition
   - **Number of Sessions Completed**
   - **Button: "Start Session"** (for launching game directly)
4. **Additional Options**:
   - **View Details** button opens full profile with demographics and session logs.
   - **Create New Participant** button to launch a new game session.

---

## Journey 3: Creating a New Participant

1. **Initiation**: Researcher taps **“Create New Participant”**.
2. **Form Navigation**: App navigates to participant form.
3. **Data Entry**:
   - Age
   - Gender (dropdown)
   - Condition
   - Note
4. **Save**: Tapping **“Save Participant”** generates a new unique incremental ID (e.g., *3*).
5. **Return**: App navigates back to dashboard, which now includes the new participant.

---

## Journey 4: Updating Session Settings

1. **Navigation**: Researcher taps the **Settings** icon on the dashboard.
2. **Settings Page**: App opens to a form with configurable options:
   - **Session Time Limit** (default: 5 minutes)
   - **Cue Timeouts**:
     - CL1 Timeout (default: 30 seconds)
     - CL2 Timeout (default: 30 seconds)
     - CL3 Timeout (default: 30 seconds)
     - CL4 Timeout (default: 30 seconds)
3. **Save Changes**: Researcher taps **“Save Settings”**, and settings are applied globally to all new sessions.
4. **Return**: App navigates back to the dashboard.

---

## Journey 5: Initiating a Game Session (Two Methods)

### A. From Dashboard (Quick Start)
1. **Dashboard View**: Each participant card includes a **“Start Session”** button.
2. **Start**: Researcher taps the button.
3. **Game Load**: Game view opens directly, passing participant ID.

### B. From Participant Detail Screen
1. **Selection**: Researcher taps a participant.
2. **Details View**: Includes demographic data and past sessions.
3. **Start**: Researcher taps **“Start New Session”**.
4. **Game Load**: Game view opens with participant ID.

---

## Journey 6: The Child’s Game Session

1. **Game Introduction**:
   - App displays a neutral character image without any game items.
   - The character introduces the game to the child.

2. **Trial Start**:
   - Game items appear on the screen.
   - Game begins with **CL1 (eye gaze)** cue, with the character looking towards the correct item.
   - **CL1 shown continuously** until correct selection or cue timeout.
   
3. **Cue Progression**:
   - If incorrect or no response → escalate cue:
     - **CL2**: Eye gaze + Head Turn
     - **CL3**: CL2 + Pointing
     - **CL4**: CL3 + Sparkle on Target
   - Timeouts between cues are configurable.

4. **Child Selection**:
   - Once an object is selected:
     - Character acknowledges and gives **positive feedback**.
     - Prompts the child to **drag the object** to them.
     - Dragging completes the task and is also positively reinforced.

5. **Difficulty Progression** (Updated Logic):
    - **Session begins in DL-I (2 objects per trial)**.
    - The system **upgrades to DL-II (4 objects)** if:
        - Child gets **1 correct response at CL1**, OR
        - Child gets **2 consecutive correct responses at CL2**.
    - Once in **DL-II**, the app **remains at DL-II** until session ends — it does not downgrade.
    - Difficulty is managed by an internal **state machine**.

6. **Session End**:
   - Session continues until:
     - Max session time (default 5 min) is reached, OR
     - Researcher exits manually.
   - Character thanks the child and ends on a friendly note.

7. **Return**: App automatically navigates back to the participant detail screen or dashboard.

---

## Journey 7: Event & Interaction Logging

The app logs **all session activity** for each child and session, including:

- **System Events**:
  - Session started
  - Cue level shown
  - Cue level escalated
  - Character welcomed child
  - Character gave feedback (selection or drag)
  - Session ended

- **User Interactions**:
  - Every **object tap**, **object selection**, and **drag path**
  - Time taken per cue
  - Cue level where object was selected
  - Drag success or failure

Each log entry includes timestamps and participant/session references.

---

## Journey 8: Exporting Data

### A. Export All Data (Global)
1. **From Dashboard**: Researcher taps **“Export All Data”** button.
2. **Confirmation Prompt**: User confirms action.
3. **Export File**:
   - Format: CSV or JSON
   - Includes: all participants, all sessions, full interaction logs
4. **Share Dialog**: Opens native share/save interface (e.g., email, drive).

### B. Export Individual Participant Data
1. **Navigate to Participant Detail Page**
2. **Tap “Export Participant Data”**
3. **Confirmation Prompt**
4. **Export File**:
   - Includes: participant demographics, session logs, trial-level details
   - Format: CSV or JSON
5. **Share Dialog**: Opens native sharing options for saving or sending the file.

---